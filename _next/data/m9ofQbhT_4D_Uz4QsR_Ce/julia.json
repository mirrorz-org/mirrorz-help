{"pageProps":{"toc":[{"url":"#","text":"Overview","depth":2},{"url":"#使用方式","depth":2,"text":"使用方式"},{"url":"#临时使用","depth":3,"text":"临时使用"},{"url":"#永久使用","depth":3,"text":"永久使用"},{"url":"#常见问题","depth":2,"text":"常见问题"},{"url":"#为什么有些包的下载还是很慢","depth":3,"text":"为什么有些包的下载还是很慢？"},{"url":"#为什么注册表还是从原地址下载","depth":3,"text":"为什么注册表还是从原地址下载？"},{"url":"#为什么有些包还是从原地址下载","depth":3,"text":"为什么有些包还是从原地址下载？"}],"content":"[\"$r\",null,null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"镜像站提供了 Julia 的官方包注册表 \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/JuliaRegistries/General\",\"rel\":\"nofollow\",\"children\":\"General\"}],\" 镜像来加速 Julia 包的安装。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"一些镜像站也提供了 Julia 二进制程序的镜像，关于其使用请参考 \",[\"$r\",\"a\",null,{\"href\":\"/julia-releases/\",\"children\":\"Julia Releases 帮助\"}],\".\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"注：本镜像的使用需要 Julia \",[\"$r\",\"code\",null,{\"children\":\"v1.4.0\"}],\" 或更新的版本。\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"使用方式\",\"children\":\"使用方式\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"只需要设置环境变量 \",[\"$r\",\"code\",null,{\"children\":\"JULIA_PKG_SERVER\"}],\" 即可切换镜像。若成功切换镜像，则能通过 \",[\"$r\",\"code\",null,{\"children\":\"versioninfo()\"}],\" 查询到相关信息，例如：\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"julia> versioninfo()\\nJulia Version 1.4.1\\nCommit 381693d3df* (2020-04-14 17:20 UTC)\\nPlatform Info:\\n  OS: Linux (x86_64-pc-linux-gnu)\\n  CPU: Intel(R) Core(TM) i7-6800K CPU @ 3.40GHz\\n  WORD_SIZE: 64\\n  LIBM: libopenlibm\\n  LLVM: libLLVM-8.0.1 (ORCJIT, broadwell)\\nEnvironment:\\n  JULIA_PKG_SERVER = {{http_protocol}}{{mirror}}\",\"codeLanguage\":\"julia\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"若不设置该环境变量则默认使用官方服务器 \",[\"$r\",\"code\",null,{\"children\":\"pkg.julialang.org\"}],\" 作为上游。\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"临时使用\",\"children\":\"临时使用\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"不同系统和命令行下设置环境变量的方式各不相同，在命令行下可以通过以下方式来临时修改环境变量\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Linux Bash\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"export JULIA_PKG_SERVER={{http_protocol}}{{mirror}}\",\"codeLanguage\":\"bash\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Windows Powershell:\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"$env:JULIA_PKG_SERVER = '{{http_protocol}}{{mirror}}'\",\"codeLanguage\":\"powershell\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"也可以利用 JuliaCN 社区维护的中文本地化工具包 \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/JuliaCN/JuliaZH.jl\",\"rel\":\"nofollow\",\"children\":\"JuliaZH\"}],\" 来进行切换：\"]}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"using JuliaZH # 在 using 时会自动切换到国内的镜像站\\nJuliaZH.set_mirror(\\\"BFSU\\\") # 也可以选择手动切换到 BFSU 镜像\\nJuliaZH.mirrors # 查询记录的上游信息\",\"language\":\"julia\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"永久使用\",\"children\":\"永久使用\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"不同系统和命令行下永久设定环境变量的方式也不相同，例如 Linux Bash 下可以通过修改 \",[\"$r\",\"code\",null,{\"children\":\"~/.bashrc\"}],\" 文件实现该目的：\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"# ~/.bashrc\\nexport JULIA_PKG_SERVER={{http_protocol}}{{mirror}}\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"此外，这里再提供一种针对 Julia 的全平台通用的方式：\",[\"$r\",\"code\",null,{\"children\":\"$JULIA_DEPOT_PATH/config/startup.jl\"}],\"\\n( 默认为 \",[\"$r\",\"code\",null,{\"children\":\"~/.julia/config/startup.jl\"}],\" ) 文件定义了每次启动 Julia 时都会执行的命令，编辑该文件，添加以下内容即可：\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"# ~/.julia/config/startup.jl\\nENV[\\\"JULIA_PKG_SERVER\\\"] = \\\"{{http_protocol}}{{mirror}}\\\"\",\"codeLanguage\":\"julia\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"也可以选择使用 \",[\"$r\",\"code\",null,{\"children\":\"JuliaZH\"}],\" 来一键修改/创建 \",[\"$r\",\"code\",null,{\"children\":\"startup.jl\"}],\" 文件：\"]}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"# 以 BFSU 镜像站为例\\njulia> JuliaZH.generate_startup(\\\"default\\\")\\n┌ Info: 添加 PkgServer\\n│   服务器地址 = \\\"https://pkg.julialang.org\\\"\\n└   配置文件 = \\\"/root/.julia/config\\\"\\n\\njulia> JuliaZH.generate_startup(\\\"BFSU\\\")\\n┌ Info: 更新 PkgServer\\n│   原服务器地址 = \\\"https://pkg.julialang.org\\\"\\n│   新服务器地址 = \\\"https://mirrors.bfsu.edu.cn/julia\\\"\\n└   配置文件 = \\\"/root/.julia/config\\\"\",\"language\":\"julia\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"若要临时禁止，可以通过 \",[\"$r\",\"code\",null,{\"children\":\"julia --startup-file=no\"}],\" 来取消执行 \",[\"$r\",\"code\",null,{\"children\":\"startup.jl\"}],\" 文件。\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"常见问题\",\"children\":\"常见问题\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"为什么有些包的下载还是很慢\",\"children\":\"为什么有些包的下载还是很慢？\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"有两类数据不会被镜像：\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"在 \",[\"$r\",\"code\",null,{\"children\":\"deps/build.jl\"}],\" 文件中硬编码的下载地址，例如 \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/jheinen/GR.jl/blob/70f025d5cb439d036409f1985107cb5e1615097f/deps/build.jl#L116\",\"rel\":\"nofollow\",\"children\":\"GR\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"在 \",[\"$r\",\"code\",null,{\"children\":\"Artifacts.toml\"}],\" 中没有给出 \",[\"$r\",\"code\",null,{\"children\":\"download\"}],\" 项的资源，例如 \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/JuliaImages/TestImages.jl/blob/eaa94348df619c65956e8cfb0032ecddb7a29d3a/Artifacts.toml\",\"rel\":\"nofollow\",\"children\":\"TestImages\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"在安装包含这两类数据的包时，其数据依然是从原始地址进行下载，因此若网络不稳定则可能会在 \",[\"$r\",\"code\",null,{\"children\":\"build\"}],\" 阶段报错。\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"为什么注册表还是从原地址下载\",\"children\":\"为什么注册表还是从原地址下载？\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Julia \",[\"$r\",\"code\",null,{\"children\":\"v1.4.0\"}],\" 之前的版本采用的是 \",[\"$r\",\"code\",null,{\"children\":\"git clone\"}],\" 的方式拉取注册表。为了保持兼容性，如果现有的注册表是一个完整的 git 仓库的话，\\n那么即使设置了 PkgServer 作为上游镜像也依然会通过 \",[\"$r\",\"code\",null,{\"children\":\"git\"}],\" 来进行更新，换句话说，不会通过镜像站来下载注册表数据。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"以默认注册表 \",[\"$r\",\"code\",null,{\"children\":\"General\"}],\" 为例，只需要手动将其重置到镜像站即可：\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"删除当前注册表：\",[\"$r\",\"code\",null,{\"children\":\"(@v1.4) pkg> registry rm General\"}]]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"从镜像站下载/拉取注册表： \",[\"$r\",\"code\",null,{\"children\":\"(@v1.4) pkg> registry add General\"}],\" -- 将无法在旧 Julia 版本中更新注册表\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"为什么有些包还是从原地址下载\",\"children\":\"为什么有些包还是从原地址下载？\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"镜像站只镜像注册表中记录的包，因此如果某些包是通过指定 URL 的方式来安装的话，那么该包的更新不会从镜像站进行下载。\\n这常见于那些还未注册的包及其版本，例如：\"}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"]add Flux#master\\n]add https://github.com/FluxML/Flux.jl.git\\nPkg.add(PackageSpec(url=\\\"https://github.com/FluxML/Flux.jl.git\\\"))\",\"language\":\"julia\"}]]}]","meta":{"title":"Julia 软件仓库镜像使用帮助","cname":"julia"},"cname":"julia"},"__N_SSG":true}
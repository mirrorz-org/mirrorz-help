{"pageProps":{"toc":[{"url":"#","text":"Overview","depth":2},{"url":"#ustc","depth":2,"text":"USTC"},{"url":"#使用方法","depth":3,"text":"使用方法"},{"url":"#预发布版本","depth":3,"text":"预发布版本"},{"url":"#sjtug","depth":2,"text":"SJTUG"},{"url":"#使用说明","depth":3,"text":"使用说明"},{"url":"#其他配置","depth":2,"text":"其他配置"},{"url":"#xdg-支持","depth":3,"text":"XDG 支持"},{"url":"#安装目录变更","depth":3,"text":"安装目录变更"},{"url":"#msys2-设置","depth":3,"text":"MSYS2 设置"}],"content":"[\"$r\",null,null,{\"children\":[[\"$r\",\"p\",null,{\"children\":\"GHCup 是一种用于安装 Haskell 的工具，它使得用户可以轻易地在 GNU/Linux、macOS 和 FreeBSD 上安装特定版本的 ghc，并从零开始搭建好一个全新的 Haskell 开发环境（包括 cabal 与 HLS 支持）。\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"GHCup 类似 Rustup，可以用于安装 Haskell 工具链。建议搭配 Hackage 和 Stackage 源使用。\"}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"ustc\",\"children\":\"USTC\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"该节内容仅适用于 USTC 及通过类似方式同步 GHCup 的站点。\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"使用方法\",\"children\":\"使用方法\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"参考如下步骤可安装完整的 Haskell 工具链。\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"注意，以下命令会安装并配置 GHCup 0.0.8 版本的元数据。\\n可查看以下目录的内容，并选择需要安装的 GHCup 版本的 yaml 文件替换以下命令中的 URL。\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"{{http_protocol}}{{mirror}}/ghcup-metadata/\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"第一步（可选）\"}],\" ：使用镜像源安装 GHCup 本体。如已经安装 GHCup，可跳到下一步。\"]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Linux, FreeBSD, macOS 用户：在终端中运行如下命令\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"# Linux, FreeBSD, macOS 用户：在终端中运行如下命令\\ncurl --proto '=https' --tlsv1.2 -LsSf {{http_protocol}}{{mirror}}/sh/bootstrap-haskell | BOOTSTRAP_HASKELL_YAML={{http_protocol}}{{mirror}}/ghcup-metadata/ghcup-0.0.8.yaml sh\",\"codeLanguage\":\"bash\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Windows 用户：以非管理员身份在 PowerShell 中运行如下命令\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"$env:BOOTSTRAP_HASKELL_YAML = '{{http_protocol}}{{mirror}}/ghcup-metadata/ghcup-0.0.8.yaml'\\nSet-ExecutionPolicy Bypass -Scope Process -Force;[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072;Invoke-Command -ScriptBlock ([ScriptBlock]::Create((Invoke-WebRequest {{http_protocol}}{{mirror}}/sh/bootstrap-haskell.ps1 -UseBasicParsing))) -ArgumentList $true\",\"codeLanguage\":\"powershell\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"第二步\"}],\" ：配置 GHCup 使用科大源。编辑 \",[\"$r\",\"code\",null,{\"children\":\"~/.ghcup/config.yaml\"}],\" 增加如下配置：\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"url-source:\\n  OwnSource: {{http_protocol}}{{mirror}}/ghcup-metadata/ghcup-0.0.8.yaml\",\"codeLanguage\":\"yaml\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"第三步（可选）\"}],\" ：配置 Cabal 和 Stack 使用镜像源，请参考文档 \",[\"$r\",\"a\",null,{\"href\":\"/hackage/\",\"children\":\"Hackage 帮助\"}],\" 和 \",[\"$r\",\"a\",null,{\"href\":\"stackage\",\"children\":\"Stackage 帮助\"}],\" 。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"镜像站 GHCup 源仅支持较新的 GHCup 版本（元数据格式版本仅支持 0.0.6 及以上）。如果你使用的 GHCup 版本比较旧，请参考上述步骤安装新版本 GHCup。\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"预发布版本\",\"children\":\"预发布版本\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"使用预发布频道可以安装尚未正式发布的测试版本。要启用预发布源，将 \",[\"$r\",\"code\",null,{\"children\":\"~/.ghcup/config.yaml\"}],\" 文件中 \",[\"$r\",\"code\",null,{\"children\":\"url-source\"}],\" 一节修改如下：\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"url-source:\\n  OwnSource:\\n    - {{http_protocol}}{{mirror}}/ghcup-metadata/ghcup-0.0.8.yaml\\n    - {{http_protocol}}{{mirror}}/ghcup-metadata/ghcup-prereleases-0.0.8.yaml\",\"codeLanguage\":\"yaml\"}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"sjtug\",\"children\":\"SJTUG\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"该节内容仅适用于 SJTUG 及通过类似方式同步 GHCup 的站点。\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"使用说明\",\"children\":\"使用说明\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"创建 \",[\"$r\",\"code\",null,{\"children\":\"~/.ghcup/config.yaml\"}],\" 并输入以下内容：\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"url-source:\\n  OwnSource: {{http_protocol}}{{mirror}}/yaml/ghcup/data/ghcup-0.0.8.yaml\",\"codeLanguage\":\"yaml\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"如果您尚未安装 ghcup，请在完成以上步骤后，于终端中执行以下指令（请不要以 root 用户执行），随后跟随屏幕上的指引完成安装。\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"如果您运行的是 Linux, macOS (Intel), FreeBSD 或 WSL，请执行：\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"curl --proto '=https' --tlsv1.2 -LsSf https://{{mirror}}/script/install.sh | sh\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"如果您运行的是 macOS (Apple 芯片) 请执行：\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"curl --proto '=https' --tlsv1.2 -LsSf https://{{mirror}}/script/install.sh | arch -x86_64 /bin/bash\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":\"故障排除\"}]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ghcup 出现形如 \",[\"$r\",\"code\",null,{\"children\":\"[ Error ] JSON decoding failed with: AesonException\"}],\" 的错误\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"这可能是由于本机 ghcup 版本与配置文件版本不匹配造成。\\nghcup 于 0.1.15.1 版本前使用 0.0.4 版本的配置文件，此版本及之后的版本使用 0.0.5+ 版本的配置文件。\\n请尝试将 \",[\"$r\",\"code\",null,{\"children\":\"config.yaml\"}],\" 中的 \",[\"$r\",\"code\",null,{\"children\":\"ghcup-0.0.8.yaml\"}],\" 改为 \",[\"$r\",\"code\",null,{\"children\":\"ghcup-0.0.4.yaml\"}],\" （抑或反之）后重试。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"请注意，ghcup 上游倾向于仅更新最新版本配置文件中的内容，当版本发生变化后请及时更新配置文件版本。\"}],\"\\n\",[\"$r\",\"ol\",null,{\"start\":\"2\",\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"通过 ghcup 安装软件包时出现 \",[\"$r\",\"code\",null,{\"children\":\"Error: Download failed ...\"}],\" 错误\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"这一错误可能是由于您的 ghcup 版本过老，使用的配置文件已经长久未更新，其中包含的软件包版本过旧所致。我们将尽力保留旧版本的软件包，但当存储空间不足时，可能随时删除旧文件。本镜像站仅保证同步最新版本配置文件中包含的软件包。\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"当出现上述现象时，请首先尝试更新 ghcup 的版本，并根据 \",[\"$r\",\"code\",null,{\"children\":\"故障排除 1\"}],\" 的指示修改配置文件。若 ghcup 已无法更新，可以尝试删除 \",[\"$r\",\"code\",null,{\"children\":\"~/.ghcup\"}],\" 整个文件夹（这一操作将删除 ghcup 以及所有通过 ghcup 安装的软件），并根据 \",[\"$r\",\"code\",null,{\"children\":\"使用说明\"}],\" 重新安装最新版本的 ghcup。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"若完成以上步骤后问题仍未解决，请至 \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/sjtug/mirror-requests\",\"rel\":\"nofollow\",\"children\":\"此处\"}],\" 向 SJTUG 反馈 BUG。\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"其他配置\",\"children\":\"其他配置\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"xdg-支持\",\"children\":\"XDG 支持\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"参考 \",[\"$r\",\"a\",null,{\"href\":\"https://www.haskell.org/ghcup/guide/#xdg-support\",\"rel\":\"nofollow\",\"children\":\"GHCup xdg-support\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"对于 Linux、FreeBSD、macOS 用户，如果想要让 GHCup 遵循 XDG 规范，可以使用 \",[\"$r\",\"code\",null,{\"children\":\"GHCUP_USE_XDG_DIRS\"}],\" 变量，例如：\"]}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"export GHCUP_USE_XDG_DIRS=1\",\"language\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"还可以将上述内容写入 \",[\"$r\",\"code\",null,{\"children\":\"~/.profile\"}],\" 等文件中。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"使用 \",[\"$r\",\"code\",null,{\"children\":\"GHCUP_USE_XDG_DIRS\"}],\" 后，GHCup 配置目录将由默认的 \",[\"$r\",\"code\",null,{\"children\":\"~/.ghcup\"}],\" 变成 \",[\"$r\",\"code\",null,{\"children\":\"~/.config/ghcup\"}],\"；\\n而二进制目录会使用 \",[\"$r\",\"code\",null,{\"children\":\"~/.local/bin\"}],\"，需要将该目录加入 \",[\"$r\",\"code\",null,{\"children\":\"PATH\"}],\" 才能够正常使用 GHCup 安装的 GHC 以及其他工具。\"]}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"export PATH=$HOME/.local/bin:$PATH\",\"language\":\"bash\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"安装目录变更\",\"children\":\"安装目录变更\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"参考 \",[\"$r\",\"a\",null,{\"href\":\"https://www.haskell.org/ghcup/guide/#env-variables\",\"rel\":\"nofollow\",\"children\":\"GHCup env-variables\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"对于 Windows 用户或不想使用 XDG 目录的 Linux、FreeBSD、macOS 用户，可以使用 \",[\"$r\",\"code\",null,{\"children\":\"GHCUP_INSTALL_BASE_PREFIX\"}],\" 来更改默认安装路径。\\n默认安装路径，对 Windows 用户而言是 \",[\"$r\",\"code\",null,{\"children\":\"C:\\\\ghcup\"}],\"，而对于 Linux、FreeBSD、macOS 用户而言是 \",[\"$r\",\"code\",null,{\"children\":\"$HOME/.ghcup\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"如果想要将 GHCup 的安装目录放到某一个特定目录下，例如 \",[\"$r\",\"code\",null,{\"children\":\"~/sdk\"}],\"：\"]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":\"Windows 用户\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"可以在终端使用如下方法：\"}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"$env:GHCUP_INSTALL_BASE_PREFIX = $env:USERPROFILE/sdk\",\"language\":\"powershell\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"或使用系统设置添加该环境变量。\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":\"Linux、FreeBSD、macOS 用户\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"可以在终端使用如下方法：\"}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"export GHCUP_INSTALL_BASE_PREFIX=$HOME/sdk\",\"language\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"还可以将上述内容写入 \",[\"$r\",\"code\",null,{\"children\":\"~/.profile\"}],\" 等文件中。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"msys2-设置\",\"children\":\"MSYS2 设置\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"参考 \",[\"$r\",\"a\",null,{\"href\":\"https://www.haskell.org/ghcup/guide/#env-variables\",\"rel\":\"nofollow\",\"children\":\"GHCup env-variables\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"对于 Windows 用户，如果系统中已经安装了 MSYS2 环境，则可以使用 \",[\"$r\",\"code\",null,{\"children\":\"GHCUP_MSYS2\"}],\" 来指定想要让 GHCup 使用的 MSYS2 环境。\\n如果不指定使用的 MSYS2 环境，则会默认新安装一个 MSYS2 环境，并且使用新安装的 MSYS2 环境。\"]}]]}]","meta":{"title":"GHCup 使用帮助","cname":"ghcup"},"cname":"ghcup"},"__N_SSG":true}
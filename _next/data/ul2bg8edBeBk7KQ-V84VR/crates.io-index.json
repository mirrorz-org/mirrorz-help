{"pageProps":{"toc":[],"content":"[\"$r\",null,null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"编辑 \",[\"$r\",\"code\",null,{\"children\":\"$CARGO_HOME/config.toml\"}],\" 文件，添加以下内容：\"]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"[source.crates-io]\\nreplace-with = 'mirror'\\n\\n[source.mirror]\\nregistry = \\\"sparse+{{http_protocol}}{{mirror}}/\\\"\\n\\n[registries.mirror]\\nindex = \\\"sparse+{{http_protocol}}{{mirror}}/\\\"\",\"codeLanguage\":\"toml\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"注：\",[\"$r\",\"code\",null,{\"children\":\"sparse+\"}],\" 表示在使用稀疏索引，链接末尾的 \",[\"$r\",\"code\",null,{\"children\":\"/\"}],\" 不能缺少。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"注：\",[\"$r\",\"code\",null,{\"children\":\"$CARGO_HOME\"}],\"：在 Windows 系统默认为：\",[\"$r\",\"code\",null,{\"children\":\"%USERPROFILE%\\\\.cargo\"}],\"，在类 Unix 系统默认为：\",[\"$r\",\"code\",null,{\"children\":\"$HOME/.cargo\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"注：cargo 仍会尝试读取不带 \",[\"$r\",\"code\",null,{\"children\":\".toml\"}],\" 扩展名的配置文件（即 \",[\"$r\",\"code\",null,{\"children\":\"$CARGO_HOME/config\"}],\"），但从 1.39 版本起，cargo 引入了对 \",[\"$r\",\"code\",null,{\"children\":\".toml\"}],\" 扩展名的支持，并将其设为首选格式。请根据使用的 cargo 版本选择适当的配置文件名。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"注：使用 \",[\"$r\",\"code\",null,{\"children\":\"cargo search\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"cargo info\"}],\" 等命令时需要添加 \",[\"$r\",\"code\",null,{\"children\":\"--registry mirror\"}],\"，例如 \",[\"$r\",\"code\",null,{\"children\":\"cargo search --registry mirror reqwest\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"在 Linux 环境可以使用下面的命令完成：\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"mkdir -vp ${CARGO_HOME:-$HOME/.cargo}\\n\\ncat << EOF | tee -a ${CARGO_HOME:-$HOME/.cargo}/config.toml\\n[source.crates-io]\\nreplace-with = 'mirror'\\n\\n[source.mirror]\\nregistry = \\\"sparse+{{http_protocol}}{{mirror}}/\\\"\\n\\n[registries.mirror]\\nindex = \\\"sparse+{{http_protocol}}{{mirror}}/\\\"\\nEOF\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"截至目前，可以通过 \",[\"$r\",\"code\",null,{\"children\":\"cargo +nightly -Z sparse-registry update\"}],\" 使用稀疏索引。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"cargo 1.68 版本开始支持稀疏索引：不再需要完整克隆 crates.io-index 仓库，可以加快获取包的速度。如果您的 cargo 版本大于等于 1.68，可以直接使用而不需要开启 nightly。\"}]]}]","meta":{"title":"Rust crates.io 稀疏索引镜像使用帮助","cname":"crates.io-index","disable_https_select":true},"cname":"crates.io-index"},"__N_SSG":true}
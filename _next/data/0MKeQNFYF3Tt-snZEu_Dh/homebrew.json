{"pageProps":{"toc":[{"url":"#","text":"Overview","depth":2},{"url":"#首次安装-homebrew--linuxbrew","depth":3,"text":"首次安装 Homebrew / Linuxbrew"},{"url":"#替换现有仓库上游","depth":3,"text":"替换现有仓库上游"},{"url":"#复原仓库上游","depth":3,"text":"复原仓库上游"}],"content":"[\"$r\",null,null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":[\"注：该镜像是 Homebrew / Linuxbrew 源程序以及 formula / cask 索引的镜像（即 \",[\"$r\",\"code\",null,{\"children\":\"brew update\"}],\" 时所更新内容）。镜像站同时提供相应的二进制预编译包的镜像，请参考 \",[\"$r\",\"a\",null,{\"href\":\"/homebrew-bottles/\",\"children\":\"Homebrew bottles 镜像使用帮助\"}]]}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"镜像站提供了 \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/Homebrew\",\"rel\":\"nofollow\",\"children\":\"https://github.com/Homebrew\"}],\" 组织下的以下 \",[\"$r\",\"code\",null,{\"children\":\"repo\"}],\"：\",[\"$r\",\"code\",null,{\"children\":\"brew\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"homebrew-core\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"homebrew-cask\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"homebrew-command-not-found\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"install\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":[\"注：自 brew 4.0.0 (2023 年 2 月 16 日) 起，\",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_INSTALL_FROM_API\"}],\" 会成为默认行为，无需设置。大部分用户无需再克隆 \",[\"$r\",\"code\",null,{\"children\":\"homebrew-core\"}],\" 仓库，故无需设置 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_CORE_GIT_REMOTE\"}],\" 环境变量；但若需要运行 \",[\"$r\",\"code\",null,{\"children\":\"brew\"}],\" 的开发命令或者 \",[\"$r\",\"code\",null,{\"children\":\"brew\"}],\" 安装在非官方支持的默认 prefix 位置，则仍需设置 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_CORE_GIT_REMOTE\"}],\" 环境变量。如果不想通过 API 安装，可以设置 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_NO_INSTALL_FROM_API=1\"}],\"。\"]}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":[\"注：目前，\",[\"$r\",\"code\",null,{\"children\":\"homebrew-cask-{drivers,versions,fonts}\"}],\" 已被弃用，所有 cask 合并至 \",[\"$r\",\"code\",null,{\"children\":\"homebrew-cask\"}],\" 仓库。本帮助内已移除克隆这些仓库的命令。已克隆用户（\",[\"$r\",\"code\",null,{\"children\":\"brew tap\"}],\" 查看）可使用 \",[\"$r\",\"code\",null,{\"children\":\"brew untap\"}],\" 移除废弃的仓库。\"]}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"首次安装-homebrew--linuxbrew\",\"children\":\"首次安装 Homebrew / Linuxbrew\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"首先，需要确保系统中安装了 bash、git 和 curl，对于 macOS 用户需额外要求安装 Command Line Tools (CLT) for Xcode。\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"对于 macOS 用户，系统自带 bash、git 和 curl，在命令行输入 \",[\"$r\",\"code\",null,{\"children\":\"xcode-select --install\"}],\" 安装 CLT for Xcode 即可。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"对于 Linux 用户，系统自带 bash，仅需额外安装 git 和 curl。\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"接着，在终端输入以下几行命令设置环境变量：\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"export HOMEBREW_BREW_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/brew.git\\\"\\nexport HOMEBREW_CORE_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/homebrew-core.git\\\"\\nexport HOMEBREW_INSTALL_FROM_API=1\\n# export HOMEBREW_API_DOMAIN\\n# export HOMEBREW_BOTTLE_DOMAIN\\n# export HOMEBREW_PIP_INDEX_URL\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"前往 \",[\"$r\",\"a\",null,{\"href\":\"/homebrew-bottles/\",\"children\":\"Homebrew bottles 镜像使用帮助\"}],\"中「临时替换」一节设置好 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_API_DOMAIN\"}],\" 与 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_BOTTLE_DOMAIN\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"前往 \",[\"$r\",\"a\",null,{\"href\":\"/pypi/\",\"children\":\"PyPI 镜像使用帮助\"}],\"中「Homebrew」一节设置好 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_PIP_INDEX_URL\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"最后，在终端运行以下命令以安装 Homebrew / Linuxbrew：\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"# 从镜像下载安装脚本并安装 Homebrew / Linuxbrew\\ngit clone --depth=1 {{http_protocol}}{{mirror}}/install.git brew-install\\n/bin/bash brew-install/install.sh\\nrm -rf brew-install\\n\\n# 也可从 GitHub 获取官方安装脚本安装 Homebrew / Linuxbrew\\n/bin/bash -c \\\"$(curl -fsSL https://github.com/Homebrew/install/raw/master/install.sh)\\\"\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"这样在首次安装的时候也可以使用镜像。更多信息请参考 \",[\"$r\",\"a\",null,{\"href\":\"https://docs.brew.sh/Installation\",\"rel\":\"nofollow\",\"children\":\"Homebrew 官方安装文档\"}],\"。\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":\"安装成功后需将 brew 程序的相关路径加入到环境变量中：\"}]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"以下针对基于 Apple Silicon CPU 设备上的 macOS 系统（命令行运行 \",[\"$r\",\"code\",null,{\"children\":\"uname -m\"}],\" 应输出 \",[\"$r\",\"code\",null,{\"children\":\"arm64\"}],\"）上的 Homebrew：\"]}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"test -r ~/.bash_profile && echo 'eval \\\"$(/opt/homebrew/bin/brew shellenv)\\\"' >> ~/.bash_profile\\ntest -r ~/.zprofile && echo 'eval \\\"$(/opt/homebrew/bin/brew shellenv)\\\"' >> ~/.zprofile\",\"language\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"对基于 Intel CPU 设备上的 macOS 系统（命令行运行 \",[\"$r\",\"code\",null,{\"children\":\"uname -m\"}],\" 应输出 \",[\"$r\",\"code\",null,{\"children\":\"x86_64\"}],\"）的用户可跳过本步。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"以下针对 Linux 系统上的 Linuxbrew：\"}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"test -d ~/.linuxbrew && eval \\\"$(~/.linuxbrew/bin/brew shellenv)\\\"\\ntest -d /home/linuxbrew/.linuxbrew && eval \\\"$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)\\\"\\ntest -r ~/.bash_profile && echo \\\"eval \\\\\\\"\\\\$($(brew --prefix)/bin/brew shellenv)\\\\\\\"\\\" >> ~/.bash_profile\\ntest -r ~/.profile && echo \\\"eval \\\\\\\"\\\\$($(brew --prefix)/bin/brew shellenv)\\\\\\\"\\\" >> ~/.profile\\ntest -r ~/.zprofile && echo \\\"eval \\\\\\\"\\\\$($(brew --prefix)/bin/brew shellenv)\\\\\\\"\\\" >> ~/.zprofile\",\"language\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"参考了 \",[\"$r\",\"a\",null,{\"href\":\"https://docs.brew.sh/Homebrew-on-Linux\",\"rel\":\"nofollow\",\"children\":\"https://docs.brew.sh/Homebrew-on-Linux\"}],\"。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"替换现有仓库上游\",\"children\":\"替换现有仓库上游\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"替换 brew 程序本身的源，Homebrew / Linuxbrew 相同：\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"# export HOMEBREW_API_DOMAIN=\\nexport HOMEBREW_BREW_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/brew.git\\\"\\nbrew update\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"前往 \",[\"$r\",\"a\",null,{\"href\":\"/homebrew-bottles/\",\"children\":\"Homebrew bottles 镜像使用帮助\"}],\"中「临时替换」一节设置好 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_API_DOMAIN\"}]]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"以下针对 macOS 系统上的 Homebrew：\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"# 手动设置\\nexport HOMEBREW_CORE_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/homebrew-core.git\\\"\\n\\n# 注：自 brew 4.0 起，大部分 Homebrew 用户无需设置 homebrew/core 和 homebrew/cask 镜像，只需设置 HOMEBREW_API_DOMAIN 即可。\\n# 如果需要使用 Homebrew 的开发命令 (如 `brew cat <formula>`)，则仍然需要设置 homebrew/core 和 homebrew/cask 镜像。\\n# 请按需执行如下两行命令：\\nbrew tap --custom-remote --force-auto-update homebrew/core {{http_protocol}}{{mirror}}/homebrew-core.git\\nbrew tap --custom-remote --force-auto-update homebrew/cask {{http_protocol}}{{mirror}}/homebrew-cask.git\\n\\n# 除 homebrew/core 和 homebrew/cask 仓库外的 tap 仓库仍然需要设置镜像\\nbrew tap --custom-remote --force-auto-update homebrew/command-not-found {{http_protocol}}{{mirror}}/homebrew-command-not-found.git\\nbrew update\\n\\n# 或使用下面的几行命令自动设置\\nexport HOMEBREW_CORE_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/homebrew-core.git\\\"\\nfor tap in core cask command-not-found; do\\n    brew tap --custom-remote --force-auto-update \\\"homebrew/${tap}\\\" \\\"{{http_protocol}}{{mirror}}/homebrew-${tap}.git\\\"\\ndone\\nbrew update\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"以下针对 Linux 系统上的 Linuxbrew：\"}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"export HOMEBREW_CORE_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/homebrew-core.git\\\"\\n\\n# 注：自 brew 4.0 起，使用默认 prefix (即 \\\"/home/linuxbrew/.linuxbrew\\\") 的大部分 Homebrew 用户无需设置 homebrew/core 镜像，只需设置 HOMEBREW_API_DOMAIN 即可。\\n# 如果不是默认 prefix 或者需要使用 Homebrew 的开发命令 (如 `brew cat <formula>`)，则仍然需要设置 homebrew/core 镜像。\\n# 请按需执行如下命令：\\nbrew tap --custom-remote --force-auto-update homebrew/core {{http_protocol}}{{mirror}}/homebrew-core.git\\n\\n# 除 homebrew/core 仓库外的 tap 仓库仍然需要设置镜像\\nbrew tap --custom-remote --force-auto-update homebrew/command-not-found {{http_protocol}}{{mirror}}/homebrew-command-not-found.git\\nbrew update\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":[\"注：如果用户设置了环境变量 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_BREW_GIT_REMOTE\"}],\" 和 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_CORE_GIT_REMOTE\"}],\"，则每次执行 \",[\"$r\",\"code\",null,{\"children\":\"brew update\"}],\" 时，\",[\"$r\",\"code\",null,{\"children\":\"brew\"}],\" 程序本身和 Core Tap (\",[\"$r\",\"code\",null,{\"children\":\"homebrew-core\"}],\") 的远程将被自动设置。推荐用户将这两个环境变量设置加入 shell 的 profile 设置中。\"]}]}],\"\\n\",[\"$r\",\"CodeBlock\",null,{\"code\":\"test -r ~/.bash_profile && echo 'export HOMEBREW_BREW_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/brew.git\\\"' >> ~/.bash_profile  # bash\\ntest -r ~/.bash_profile && echo 'export HOMEBREW_CORE_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/homebrew-core.git\\\"' >> ~/.bash_profile\\ntest -r ~/.profile && echo 'export HOMEBREW_BREW_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/brew.git\\\"' >> ~/.profile\\ntest -r ~/.profile && echo 'export HOMEBREW_CORE_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/homebrew-core.git\\\"' >> ~/.profile\\n\\ntest -r ~/.zprofile && echo 'export HOMEBREW_BREW_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/brew.git\\\"' >> ~/.zprofile  # zsh\\ntest -r ~/.zprofile && echo 'export HOMEBREW_CORE_GIT_REMOTE=\\\"{{http_protocol}}{{mirror}}/homebrew-core.git\\\"' >> ~/.zprofile\",\"codeLanguage\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"对于 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_API_DOMAIN\"}],\" 与其余 bottles 相关环境变量的持久化，可以参考 \",[\"$r\",\"a\",null,{\"href\":\"/homebrew-bottles/\",\"children\":\"Homebrew Bottles 帮助\"}],\"。\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"复原仓库上游\",\"children\":\"复原仓库上游\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"（感谢 Snowonion Lee 提供说明）\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"以下针对 macOS 系统上的 Homebrew\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"# brew 程序本身，Homebrew / Linuxbrew 相同\\nunset HOMEBREW_API_DOMAIN\\nunset HOMEBREW_BREW_GIT_REMOTE\\ngit -C \\\"$(brew --repo)\\\" remote set-url origin https://github.com/Homebrew/brew\\n\\n# 以下针对 macOS 系统上的 Homebrew\\nunset HOMEBREW_CORE_GIT_REMOTE\\nBREW_TAPS=\\\"$(BREW_TAPS=\\\"$(brew tap 2>/dev/null)\\\"; echo -n \\\"${BREW_TAPS//$'\\\\n'/:}\\\")\\\"\\nfor tap in core cask command-not-found; do\\n    if [[ \\\":${BREW_TAPS}:\\\" == *\\\":homebrew/${tap}:\\\"* ]]; then  # 只复原已安装的 Tap\\n        brew tap --custom-remote \\\"homebrew/${tap}\\\" \\\"https://github.com/Homebrew/homebrew-${tap}\\\"\\n    fi\\ndone\\n\\n# 重新拉取远程\\nbrew update\",\"language\":\"bash\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"以下针对 Linux 系统上的 Linuxbrew\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"SyntaxHighlight\",null,{\"code\":\"# brew 程序本身，Homebrew / Linuxbrew 相同\\nunset HOMEBREW_API_DOMAIN\\nunset HOMEBREW_BREW_GIT_REMOTE\\ngit -C \\\"$(brew --repo)\\\" remote set-url origin https://github.com/Homebrew/brew\\n\\n# 以下针对 Linux 系统上的 Linuxbrew\\nunset HOMEBREW_API_DOMAIN\\nunset HOMEBREW_CORE_GIT_REMOTE\\nbrew tap --custom-remote homebrew/core https://github.com/Homebrew/homebrew-core\\nbrew tap --custom-remote homebrew/command-not-found https://github.com/Homebrew/homebrew-command-not-found\\n\\n# 重新拉取远程\\nbrew update\",\"language\":\"bash\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":[\"注：重置回默认远程后，用户应该删除 shell 的 profile 设置中的环境变量 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_BREW_GIT_REMOTE\"}],\" 和 \",[\"$r\",\"code\",null,{\"children\":\"HOMEBREW_CORE_GIT_REMOTE\"}],\" 以免运行 \",[\"$r\",\"code\",null,{\"children\":\"brew update\"}],\" 时远程再次被更换。\"]}]}]]}]","meta":{"title":"Homebrew 软件仓库镜像使用帮助","cname":"homebrew"},"cname":"homebrew"},"__N_SSG":true}